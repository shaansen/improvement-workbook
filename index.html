<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Step Back">
    <meta name="theme-color" content="#5a7d8c">
    <meta name="description" content="Track daily progress on stepping back from overfunctioning">

    <title>Step Back</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512.png">

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Lock Screen -->
    <div id="lock-screen" class="screen active">
        <div class="lock-container">
            <h1>Step Back</h1>
            <p id="lock-message">Enter your PIN to unlock</p>
            <div class="pin-display">
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
            </div>
            <div class="pin-pad">
                <button class="pin-btn" data-num="1">1</button>
                <button class="pin-btn" data-num="2">2</button>
                <button class="pin-btn" data-num="3">3</button>
                <button class="pin-btn" data-num="4">4</button>
                <button class="pin-btn" data-num="5">5</button>
                <button class="pin-btn" data-num="6">6</button>
                <button class="pin-btn" data-num="7">7</button>
                <button class="pin-btn" data-num="8">8</button>
                <button class="pin-btn" data-num="9">9</button>
                <button class="pin-btn" data-num="clear">&#x232B;</button>
                <button class="pin-btn" data-num="0">0</button>
                <button class="pin-btn" data-num="enter">&#x2192;</button>
            </div>
        </div>
    </div>

    <!-- Setup Screen (First Time) -->
    <div id="setup-screen" class="screen">
        <div class="setup-container">
            <h1>Welcome</h1>
            <p>Create a 6-digit PIN to encrypt your data.</p>
            <p class="small-text">Your data stays on this device, encrypted.</p>
            <div class="pin-display">
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
            </div>
            <p id="setup-step">Enter new PIN</p>
            <div class="pin-pad">
                <button class="pin-btn" data-num="1">1</button>
                <button class="pin-btn" data-num="2">2</button>
                <button class="pin-btn" data-num="3">3</button>
                <button class="pin-btn" data-num="4">4</button>
                <button class="pin-btn" data-num="5">5</button>
                <button class="pin-btn" data-num="6">6</button>
                <button class="pin-btn" data-num="7">7</button>
                <button class="pin-btn" data-num="8">8</button>
                <button class="pin-btn" data-num="9">9</button>
                <button class="pin-btn" data-num="clear">&#x232B;</button>
                <button class="pin-btn" data-num="0">0</button>
                <button class="pin-btn" data-num="enter">&#x2192;</button>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app-screen" class="screen">
        <!-- Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-view="checkin">
                <span class="nav-icon">&#x2713;</span>
                <span class="nav-label">Check-in</span>
            </button>
            <button class="nav-btn" data-view="patterns">
                <span class="nav-icon">&#x25A6;</span>
                <span class="nav-label">Patterns</span>
            </button>
            <button class="nav-btn" data-view="history">
                <span class="nav-icon">&#x2630;</span>
                <span class="nav-label">History</span>
            </button>
            <button class="nav-btn" data-view="settings">
                <span class="nav-icon">&#x2699;</span>
                <span class="nav-label">Settings</span>
            </button>
        </nav>

        <!-- Check-in View -->
        <div id="checkin-view" class="view active">
            <div class="view-content">
                <!-- Track Selector -->
                <div class="track-selector">
                    <button class="track-btn active" data-track="overfunctioning">Overfunctioning</button>
                    <button class="track-btn" data-track="avoidant">Fearful-Avoidant</button>
                </div>

                <div class="checkin-header">
                    <p class="date-display" id="today-date"></p>
                </div>

                <div class="quick-checkin" id="quick-checkin">
                    <h2 id="checkin-question">Did you practice stepping back today?</h2>
                    <div class="checkin-buttons">
                        <button class="checkin-btn yes-btn" id="btn-yes">Yes</button>
                        <button class="checkin-btn no-btn" id="btn-no">No</button>
                    </div>
                    <div class="note-section">
                        <input type="text" id="quick-note" placeholder="Quick note (optional)" maxlength="100">
                        <span class="char-count"><span id="char-count">0</span>/100</span>
                    </div>
                </div>

                <div class="checkin-done" id="checkin-done" style="display: none;">
                    <div class="done-message">
                        <span class="done-icon">&#x2713;</span>
                        <p>Checked in for today</p>
                        <p class="done-response" id="done-response"></p>
                        <p class="done-note" id="done-note"></p>
                    </div>
                    <button class="edit-btn" id="edit-checkin">Edit today's check-in</button>
                </div>

                <!-- Today's Practice -->
                <div class="todays-practice" id="todays-practice">
                    <h3 id="todays-practice-title"></h3>
                    <p id="todays-practice-desc"></p>
                    <div class="examples-section" id="todays-examples">
                        <strong>Examples:</strong>
                        <ul id="todays-examples-list"></ul>
                    </div>
                </div>

                <!-- Optional Deeper Reflection -->
                <div class="reflection-section">
                    <button class="expand-btn" id="expand-reflection">
                        <span>Weekly Practices</span>
                        <span class="expand-icon" id="expand-icon">&#x25BC;</span>
                    </button>

                    <div class="reflection-content" id="reflection-content">
                        <!-- Overfunctioning Practices -->
                        <div class="overfunctioning-content">
                            <div class="practice-item" data-day="monday">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox" data-practice="monday">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Monday - Pause Practice</h3>
                                        <p>Set 3 reminders to notice overfunctioning moments</p>
                                    </div>
                                    <button class="info-btn" data-practice="monday">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>You start rewriting a coworker's email "to help" before they even ask</li>
                                        <li>You jump in to explain something for someone mid-sentence because you think you'll say it better</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-monday">
                                    <p>This practice builds metacognitive awareness - the ability to observe your automatic patterns. Research shows that mindfulness-based interventions help people modify automatic behaviors by creating space between trigger and response. While this specific "3 reminders" approach hasn't been tested in studies, it applies evidence-based principles of awareness training to overfunctioning patterns.</p>
                                </div>
                                <input type="text" class="practice-note" data-practice="monday" placeholder="Notes (optional)" maxlength="200">
                            </div>

                            <div class="practice-item" data-day="tuesday">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox" data-practice="tuesday">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Tuesday - "Not My Circus"</h3>
                                        <p>Practice letting someone else handle their own responsibility</p>
                                    </div>
                                    <button class="info-btn" data-practice="tuesday">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>A friend complains about a problem - listen without offering solutions or fixing it for them</li>
                                        <li>A family member is running late for their own appointment - resist the urge to remind them</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-tuesday">
                                    <p>Research shows that people who set and maintain boundaries report higher life satisfaction and lower anxiety. In family systems theory, overfunctioning and underfunctioning exist as reciprocal patterns - when you step back, others have space to step up. This practice applies boundary-setting principles specifically to overfunctioning dynamics.</p>
                                </div>
                                <input type="text" class="practice-note" data-practice="tuesday" placeholder="Notes (optional)" maxlength="200">
                            </div>

                            <div class="practice-item" data-day="wednesday">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox" data-practice="wednesday">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Wednesday - Schedule Personal Time</h3>
                                        <p>Block 30 minutes for something you want (non-negotiable)</p>
                                    </div>
                                    <button class="info-btn" data-practice="wednesday">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>Block 30 min labeled "busy" - walk, read, or do nothing, even if your to-do list isn't done</li>
                                        <li>Take a full lunch break away from your desk without checking messages</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-wednesday">
                                    <p>Chronic self-sacrifice and overcommitment are linked to burnout. Studies on boundary-setting show that protecting personal time reduces emotional exhaustion. This practice reverses the overfunctioner's typical pattern of attending to everyone else's needs before their own.</p>
                                </div>
                                <input type="text" class="practice-note" data-practice="wednesday" placeholder="Notes (optional)" maxlength="200">
                            </div>

                            <div class="practice-item" data-day="thursday">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox" data-practice="thursday">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Thursday - Practice "Good Enough"</h3>
                                        <p>Do one task at 80% instead of 100%</p>
                                    </div>
                                    <button class="info-btn" data-practice="thursday">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>Send an email without re-reading it 3 times - one quick proof and send</li>
                                        <li>Leave a room 80% tidy, or submit work without one final polish pass</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-thursday">
                                    <p>Perfectionism and anxiety are strongly linked - when standards are impossibly high, anxiety increases. CBT for perfectionism shows moderate effect sizes in reducing both perfectionism and anxiety symptoms. This exercise uses exposure therapy principles: practicing imperfection in low-stakes situations helps you learn that "good enough" rarely leads to the catastrophic outcomes perfectionism predicts.</p>
                                </div>
                                <input type="text" class="practice-note" data-practice="thursday" placeholder="Notes (optional)" maxlength="200">
                            </div>

                            <div class="practice-item" data-day="friday">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox" data-practice="friday">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Friday - No Automatic Yes</h3>
                                        <p>Pause 10 seconds before responding to requests, say no to one thing</p>
                                    </div>
                                    <button class="info-btn" data-practice="friday">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>"Can you help with X?" → "Let me check and get back to you" instead of instant yes</li>
                                        <li>Decline one optional meeting, social invite, or favor - even a small one counts</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-friday">
                                    <p>Overfunctioners often respond immediately to requests without checking their own capacity. Research on decision-making shows that even brief pauses improve the quality of choices. This practice creates space to assess whether a request aligns with your boundaries and capacity before automatically agreeing.</p>
                                </div>
                                <input type="text" class="practice-note" data-practice="friday" placeholder="Notes (optional)" maxlength="200">
                            </div>

                            <div class="practice-item" data-day="weekend">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox" data-practice="weekend">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Weekend - Rest Without Earning It</h3>
                                        <p>Do something restful without completing your to-do list first</p>
                                    </div>
                                    <button class="info-btn" data-practice="weekend">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>Watch a show or nap while dishes are in the sink or laundry is unfolded</li>
                                        <li>Say "I'm resting today" without justifying it with how hard you worked</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-weekend">
                                    <p>Overfunctioners often believe rest must be "earned" through productivity. This reflects perfectionistic thinking that links self-worth to achievement. Research on self-compassion shows that treating yourself with kindness (rather than constantly striving) improves mental health outcomes. This practice challenges the belief that your value depends on constant doing.</p>
                                </div>
                                <input type="text" class="practice-note" data-practice="weekend" placeholder="Notes (optional)" maxlength="200">
                            </div>
                        </div>

                        <!-- Fearful-Avoidant Practices -->
                        <div class="avoidant-content" style="display: none;">
                            <div class="practice-item" data-day="monday">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox avoidant-checkbox" data-practice="monday">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Monday - Notice the Urge to Withdraw</h3>
                                        <p>When you feel the pull to create distance from Charlie, pause and name the trigger</p>
                                    </div>
                                    <button class="info-btn" data-practice="av-monday">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>Charlie says something loving → you feel urge to pick a fight or go cold. Pause. Name it: "I'm feeling vulnerable"</li>
                                        <li>After closeness, you want space. Notice: "Intimacy is activating my nervous system, not a real threat"</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-av-monday">
                                    <p>Fearful-avoidant attachment creates an automatic "deactivating" response when intimacy increases - your nervous system perceives closeness as danger. Research on attachment shows that simply noticing and naming this pattern interrupts the automatic response. You can't change what you don't see. This metacognitive awareness is the first step to choosing differently.</p>
                                </div>
                                <input type="text" class="practice-note avoidant-note" data-practice="monday" placeholder="Notes (optional)" maxlength="200">
                            </div>

                            <div class="practice-item" data-day="tuesday">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox avoidant-checkbox" data-practice="tuesday">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Tuesday - Stay 10% Longer</h3>
                                        <p>When closeness with Charlie feels uncomfortable, stay slightly longer instead of escaping</p>
                                    </div>
                                    <button class="info-btn" data-practice="av-tuesday">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>During a vulnerable conversation, resist the urge to change the subject or make a joke</li>
                                        <li>When Charlie shows affection, stay present for a few more seconds instead of pulling away or deflecting</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-av-tuesday">
                                    <p>Your window of tolerance for intimacy expands through gradual exposure. Stan Tatkin's research on couples shows that staying present during discomfort - even briefly - builds new neural pathways. You're teaching your nervous system that closeness is safe. Small stretches compound over time into secure relating.</p>
                                </div>
                                <input type="text" class="practice-note avoidant-note" data-practice="tuesday" placeholder="Notes (optional)" maxlength="200">
                            </div>

                            <div class="practice-item" data-day="wednesday">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox avoidant-checkbox" data-practice="wednesday">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Wednesday - Ask Directly (No Testing)</h3>
                                        <p>Express a need to Charlie clearly instead of hinting, testing, or expecting mind-reading</p>
                                    </div>
                                    <button class="info-btn" data-practice="av-wednesday">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>Instead of withdrawing to see if Charlie chases you, say "I need some reassurance right now"</li>
                                        <li>Replace "It's fine, do whatever you want" with "I'd really like it if we spent time together tonight"</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-av-wednesday">
                                    <p>Fearful-avoidant attachment often leads to "protest behaviors" - indirect ways of seeking reassurance that often backfire (withdrawing, testing, hinting). Sue Johnson's Emotionally Focused Therapy research shows that clearly stating attachment needs ("I need to feel close to you") is far more effective than protest behaviors, and builds secure connection.</p>
                                </div>
                                <input type="text" class="practice-note avoidant-note" data-practice="wednesday" placeholder="Notes (optional)" maxlength="200">
                            </div>

                            <div class="practice-item" data-day="thursday">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox avoidant-checkbox" data-practice="thursday">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Thursday - Reality-Check the Threat</h3>
                                        <p>When triggered, ask: "Is this about Charlie now, or am I reacting to an old wound?"</p>
                                    </div>
                                    <button class="info-btn" data-practice="av-thursday">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>Charlie seems distant → Before assuming rejection, ask: "Could something else be going on for them?"</li>
                                        <li>You feel criticized → Pause: "Is Charlie actually attacking me, or am I hearing my past?"</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-av-thursday">
                                    <p>Attachment wounds create a "lens" that distorts present-day interactions. Your brain pattern-matches current situations to past pain, triggering responses that may not fit the actual situation. CBT and attachment research both show that pausing to reality-test ("Is this really happening NOW?") reduces emotional reactivity and prevents unnecessary conflict.</p>
                                </div>
                                <input type="text" class="practice-note avoidant-note" data-practice="thursday" placeholder="Notes (optional)" maxlength="200">
                            </div>

                            <div class="practice-item" data-day="friday">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox avoidant-checkbox" data-practice="friday">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Friday - Receive Without Sabotaging</h3>
                                        <p>When Charlie shows love, let it in without deflecting, dismissing, or creating conflict</p>
                                    </div>
                                    <button class="info-btn" data-practice="av-friday">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>Charlie compliments you → Say "thank you, that means a lot" and sit with it, don't undermine it</li>
                                        <li>Charlie plans something special → Receive it without finding flaws or pushing them away</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-av-friday">
                                    <p>Fearful-avoidant attachment often includes difficulty receiving love - it feels unsafe, so you unconsciously sabotage it. Research shows that behaviorally accepting care (even when uncomfortable) gradually rewires your expectations. Each time you let love in without destroying it, you build evidence that you can be loved safely.</p>
                                </div>
                                <input type="text" class="practice-note avoidant-note" data-practice="friday" placeholder="Notes (optional)" maxlength="200">
                            </div>

                            <div class="practice-item" data-day="weekend">
                                <div class="practice-header">
                                    <label class="practice-check">
                                        <input type="checkbox" class="practice-checkbox avoidant-checkbox" data-practice="weekend">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="practice-info">
                                        <h3>Weekend - Self-Soothing Practice</h3>
                                        <p>Calm your nervous system when activated, without seeking reassurance or withdrawing from Charlie</p>
                                    </div>
                                    <button class="info-btn" data-practice="av-weekend">?</button>
                                </div>
                                <div class="examples-section">
                                    <strong>Examples:</strong>
                                    <ul>
                                        <li>When feeling anxious, use grounding (5 senses, deep breathing) before bringing it to Charlie</li>
                                        <li>Journal about what you're feeling first - distinguish old wounds from current reality</li>
                                    </ul>
                                </div>
                                <div class="why-section" id="why-av-weekend">
                                    <p>Fearful-avoidant attachment often means oscillating between anxiously seeking reassurance and avoidantly withdrawing. Learning to regulate your own nervous system first gives you a third option. Polyvagal theory research shows that self-soothing practices (breathing, grounding) activate the "social engagement" system, allowing you to connect from a calmer place.</p>
                                </div>
                                <input type="text" class="practice-note avoidant-note" data-practice="weekend" placeholder="Notes (optional)" maxlength="200">
                            </div>
                        </div>

                        <button class="save-practices-btn" id="save-practices">Save Practices</button>

                        <div class="disclaimer">
                            <p>This program is based on established therapeutic principles from Cognitive Behavioral Therapy (CBT), exposure therapy, and self-compassion research. While the underlying concepts are research-supported, this specific weekly structure has not been tested in clinical trials. Think of it as applying proven principles to your particular situation. If you need clinical support, please consult a licensed therapist.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Patterns View -->
        <div id="patterns-view" class="view">
            <div class="view-content">
                <h2 class="view-title">Patterns</h2>

                <div class="month-nav">
                    <button id="prev-month" class="month-nav-btn">&#x2190;</button>
                    <span id="month-label">This Month</span>
                    <button id="next-month" class="month-nav-btn">&#x2192;</button>
                </div>

                <div class="calendar-grid" id="calendar-grid">
                    <!-- Calendar days will be rendered here -->
                </div>

                <div class="month-summary" id="month-summary">
                    <!-- Summary will be rendered here -->
                </div>
            </div>
        </div>

        <!-- History View -->
        <div id="history-view" class="view">
            <div class="view-content">
                <h2 class="view-title">History</h2>

                <div class="history-filters">
                    <select id="history-filter">
                        <option value="7">Last 7 days</option>
                        <option value="30">Last 30 days</option>
                        <option value="all">All time</option>
                    </select>
                    <input type="text" id="history-search" placeholder="Search notes...">
                </div>

                <div class="history-list" id="history-list">
                    <!-- History items will be rendered here -->
                </div>

                <div class="export-section">
                    <button class="export-btn" id="export-json">Export Encrypted JSON</button>
                    <button class="export-btn" id="export-csv">Export Plain CSV</button>
                </div>
            </div>
        </div>

        <!-- Settings View -->
        <div id="settings-view" class="view">
            <div class="view-content">
                <h2 class="view-title">Settings</h2>

                <div class="settings-section">
                    <h3>Security</h3>
                    <button class="settings-btn" id="change-pin">Change PIN</button>
                    <button class="settings-btn" id="export-backup">Export Encrypted Backup</button>
                    <button class="settings-btn" id="import-backup">Import Backup</button>
                    <input type="file" id="import-file" accept=".json" style="display: none;">
                </div>

                <div class="settings-section">
                    <h3>Data</h3>
                    <button class="settings-btn danger" id="clear-data">Clear All Data</button>
                </div>

                <div class="settings-section">
                    <h3>App</h3>
                    <button class="settings-btn" id="refresh-app">Refresh App</button>
                    <p class="setting-hint">Force download latest version</p>
                </div>

                <div class="settings-section">
                    <p class="app-info">Step Back v1.1</p>
                    <p class="app-info">Data stored locally on this device</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Entry Modal -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <h3>Edit Entry</h3>
            <p class="modal-date" id="edit-date"></p>
            <div class="modal-body">
                <div class="checkin-buttons modal-buttons">
                    <button class="checkin-btn yes-btn" id="modal-yes">Yes</button>
                    <button class="checkin-btn no-btn" id="modal-no">No</button>
                </div>
                <input type="text" id="modal-note" placeholder="Quick note (optional)" maxlength="100">
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel" id="modal-cancel">Cancel</button>
                <button class="modal-btn save" id="modal-save">Save</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content">
            <h3 id="confirm-title">Confirm</h3>
            <p id="confirm-message"></p>
            <div class="modal-actions">
                <button class="modal-btn cancel" id="confirm-cancel">Cancel</button>
                <button class="modal-btn danger" id="confirm-ok">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Change PIN Modal -->
    <div id="pin-modal" class="modal">
        <div class="modal-content">
            <h3 id="pin-modal-title">Change PIN</h3>
            <p id="pin-modal-message">Enter current PIN</p>
            <div class="pin-display small">
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
            </div>
            <div class="pin-pad small">
                <button class="pin-btn" data-num="1">1</button>
                <button class="pin-btn" data-num="2">2</button>
                <button class="pin-btn" data-num="3">3</button>
                <button class="pin-btn" data-num="4">4</button>
                <button class="pin-btn" data-num="5">5</button>
                <button class="pin-btn" data-num="6">6</button>
                <button class="pin-btn" data-num="7">7</button>
                <button class="pin-btn" data-num="8">8</button>
                <button class="pin-btn" data-num="9">9</button>
                <button class="pin-btn" data-num="clear">&#x232B;</button>
                <button class="pin-btn" data-num="0">0</button>
                <button class="pin-btn" data-num="enter">&#x2192;</button>
            </div>
            <button class="modal-btn cancel pin-cancel" id="pin-modal-cancel">Cancel</button>
        </div>
    </div>

    <script src="crypto.js"></script>
    <script src="app.js"></script>
</body>
</html>
